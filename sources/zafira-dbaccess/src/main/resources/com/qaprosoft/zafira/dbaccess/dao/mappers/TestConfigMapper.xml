<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.qaprosoft.zafira.dbaccess.dao.mysql.TestConfigMapper">

	<insert id="createTestConfig" useGeneratedKeys="true" keyProperty="id">
		<![CDATA[
			INSERT INTO zafira.TEST_CONFIGS (URL, ENV, PLATFORM, PLATFORM_VERSION, BROWSER, BROWSER_VERSION, APP_VERSION, LOCALE, LANGUAGE, DEVICE)
			VALUES (
				#{url},
			    #{env},
			    #{platform},
			    #{platformVersion},
			    #{browser},
			    #{browserVersion},
			    #{appVersion},
			    #{locale},
			    #{language},
			    #{device}
			)
		]]>
	</insert>
	
	

	<sql id="getTestConfig">
		<![CDATA[
			SELECT
				TC.ID AS TEST_CONFIG_ID,
				TC.URL AS TEST_CONFIG_URL,
				TC.ENV AS TEST_CONFIG_ENV,
				TC.PLATFORM AS TEST_CONFIG_PLATFORM,
				TC.PLATFORM_VERSION AS TEST_CONFIG_PLATFORM_VERSION,
				TC.BROWSER AS TEST_CONFIG_BROWSER,
				TC.BROWSER_VERSION AS TEST_CONFIG_BROWSER_VERSION,
				TC.APP_VERSION AS TEST_CONFIG_APP_VERSION,
				TC.LOCALE AS TEST_CONFIG_LOCALE,
				TC.LANGUAGE AS TEST_CONFIG_LANGUAGE,
				TC.DEVICE AS TEST_CONFIG_DEVICE,
				TC.MODIFIED_AT AS TEST_CONFIG_MODIFIED_AT,
				TC.CREATED_AT AS TEST_CONFIG_CREATED_AT
			FROM
				zafira.TEST_CONFIGS TC
		]]>
	</sql>

	<select id="getTestConfigById" resultMap="TestConfigResultMap">
		<include refid="getTestConfig" />
		<![CDATA[
			WHERE TC.ID = #{id};
		]]>
	</select>

	<update id="updateTestConfig">
		<![CDATA[
			UPDATE
			    zafira.TEST_CONFIGS
			SET
				URL = #{url}, 
				ENV = #{env}, 
				PLATFORM = #{platform}, 
				PLATFORM_VERSION = #{platformVersion}, 
				BROWSER = #{browser}, 
				BROWSER_VERSION = #{browserVersion}, 
				APP_VERSION = #{appVersion}, 
				LOCALE = #{locale}, 
				LANGUAGE = #{language},
				DEVICE = #{device}
			WHERE
			    ID = #{id}
		]]>
	</update>
	
	<sql id="deleteTestConfig">
		<![CDATA[
			DELETE FROM zafira.TEST_CONFIGS
			WHERE ID = #{id}
		]]>
	</sql>

	<delete id="deleteTestConfigById">
		<include refid="deleteTestConfig" />
	</delete>
	
	<resultMap type="com.qaprosoft.zafira.dbaccess.model.TestConfig" id="TestConfigResultMap" autoMapping="false">
		<id column="TEST_CONFIG_ID" property="id" />
		<result column="TEST_CONFIG_URL" property="url" />
		<result column="TEST_CONFIG_ENV" property="env" />
		<result column="TEST_CONFIG_PLATFORM" property="platform" />
		<result column="TEST_CONFIG_PLATFORM_VERSION" property="platformVersion" />
		<result column="TEST_CONFIG_BROWSER" property="browser" />
		<result column="TEST_CONFIG_BROWSER_VERSION" property="browserVersion" />
		<result column="TEST_CONFIG_APP_VERSION" property="appVersion" />
		<result column="TEST_CONFIG_LOCALE" property="locale" />
		<result column="TEST_CONFIG_LANGUAGE" property="language" />
		<result column="TEST_CONFIG_DEVICE" property="device" />
		<result column="TEST_CONFIG_MODIFIED_AT" property="modifiedAt" />
		<result column="TEST_CONFIG_CREATED_AT" property="createdAt" />
	</resultMap>

</mapper>
